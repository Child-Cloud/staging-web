import{p as T,h as g}from"./index-9ZK7Cw2Y.js";const u=["p","br","strong","em","u","span","a","ul","ol","li","blockquote","h1","h2","h3","b","i"],i={span:["style"],a:["href","title"],"*":["class"]},l=s=>T.sanitize(s,{ALLOWED_TAGS:u,ALLOWED_ATTR:Object.keys(i).reduce((e,t)=>(t==="*"?e.push(...i[t]):e.push(...i[t].map(c=>`${t}:${c}`)),e),[]),KEEP_CONTENT:!0,FORBID_TAGS:["script","iframe","object","embed","form","input"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}).replace(/<b\b[^>]*>/gi,"<strong>").replace(/<\/b>/gi,"</strong>").replace(/<i\b[^>]*>/gi,"<em>").replace(/<\/i>/gi,"</em>"),r=s=>g(s,{wordwrap:!1,preserveNewlines:!0,selectors:[{selector:"h1",options:{uppercase:!1}},{selector:"h2",options:{uppercase:!1}},{selector:"h3",options:{uppercase:!1}},{selector:"blockquote",options:{trimEmptyLines:!1}}]}),n={sanitizeHTML:l,convertToPlainText:r,isContentEmpty:s=>{const o=l(s);return r(o).trim().length===0},getContentStats:s=>{const o=l(s),e=r(o);return{htmlLength:o.length,textLength:e.length,wordCount:e.split(/\s+/).filter(t=>t.length>0).length,isValid:e.trim().length>0&&o.length<=5e4}}},h=()=>{console.log("Running Rich Text Editor Tests...");const o=n.sanitizeHTML('<script>alert("xss")<\/script><p>Hello <strong>World</strong></p><iframe src="evil.com"></iframe>');console.log("✓ HTML Sanitization Test:",o==="<p>Hello <strong>World</strong></p>");const t=n.convertToPlainText("<h1>Title</h1><p>This is <strong>bold</strong> and <em>italic</em> text.</p><ul><li>Item 1</li><li>Item 2</li></ul>");console.log("✓ Plain Text Conversion Test:",t.includes("TITLE")&&t.includes("bold")&&t.includes("• Item 1"));const m=n.isContentEmpty("<p><br></p><p></p>");console.log("✓ Empty Content Detection Test:",m===!0);const a=n.getContentStats("<p>This is a test message with <strong>formatting</strong>.</p>");console.log("✓ Content Stats Test:",a.wordCount>0&&a.isValid);const p=n.sanitizeHTML("<p>This has <b>bold</b> and <i>italic</i> text.</p>");console.log("✓ Tag Conversion Test:",p.includes("<strong>")&&p.includes("<em>")),console.log("Rich Text Editor Tests Complete!")};setTimeout(h,1e3);export{h as runRichTextTests};
